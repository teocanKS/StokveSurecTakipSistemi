â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                      â•‘
â•‘       DOÄU AÅ - STOK VE SÃœREÃ‡ TAKÄ°P SÄ°STEMÄ°                        â•‘
â•‘       Raspberry Pi + Nginx + PHP + Supabase                          â•‘
â•‘                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ SÄ°STEM GEREKSÄ°NÄ°MLERÄ°
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
- Raspberry Pi 3/4 (veya herhangi bir Linux sunucu)
- Nginx
- PHP 8.2 veya 7.4 (php-fpm, php-pgsql, php-mbstring)
- Internet baÄŸlantÄ±sÄ± (Supabase iÃ§in)
- En az 1GB RAM


ğŸš€ HIZLI KURULUM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Projeyi Raspberry Pi'ye kopyala:

   scp -r /proje/klasoru pi@raspberry-ip:/home/pi/stokve


2. SSH ile baÄŸlan:

   ssh pi@raspberry-ip


3. Kurulum script'ini Ã§alÄ±ÅŸtÄ±r:

   cd /home/pi/stokve
   sudo chmod +x install.sh
   sudo bash install.sh


4. Environment variables'Ä± dÃ¼zenle:

   sudo nano /var/www/stokve/.env

   # Supabase bilgilerini gir:
   SUPABASE_URL=https://...
   SUPABASE_SERVICE_KEY=eyJ...
   DB_PASSWORD=your_password


5. Test kullanÄ±cÄ±sÄ± oluÅŸtur:

   php /var/www/stokve/generate_test_hash.php

   # Ã‡Ä±kan SQL query'lerini Supabase SQL Editor'de Ã§alÄ±ÅŸtÄ±r


6. TarayÄ±cÄ±dan test et:

   http://raspberry-ip


ğŸ”§ MANUEL KURULUM (AdÄ±m AdÄ±m)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Sistem gÃ¼ncelle:
   sudo apt update && sudo apt upgrade -y


2. Nginx kur:
   sudo apt install -y nginx


3. PHP kur:
   sudo apt install -y php8.2-fpm php8.2-pgsql php8.2-mbstring php8.2-xml php8.2-curl


4. Proje dosyalarÄ±nÄ± kopyala:
   sudo mkdir -p /var/www/stokve
   sudo cp -r * /var/www/stokve/
   sudo chown -R www-data:www-data /var/www/stokve


5. Nginx config'i ayarla:
   sudo cp /var/www/stokve/nginx.conf /etc/nginx/sites-available/stokve
   sudo ln -sf /etc/nginx/sites-available/stokve /etc/nginx/sites-enabled/
   sudo rm /etc/nginx/sites-enabled/default


6. PHP-FPM ayarlarÄ±:
   sudo nano /etc/php/8.2/fpm/php.ini

   # Åu satÄ±rlarÄ± bul ve deÄŸiÅŸtir:
   memory_limit = 256M
   upload_max_filesize = 20M
   post_max_size = 20M


7. Servisleri baÅŸlat:
   sudo systemctl restart php8.2-fpm
   sudo systemctl restart nginx
   sudo systemctl enable php8.2-fpm
   sudo systemctl enable nginx


8. .env dosyasÄ±nÄ± oluÅŸtur:
   cd /var/www/stokve
   sudo cp .env.example .env
   sudo nano .env


9. Test et:
   nginx -t
   curl -I http://localhost


ğŸ“Š DATABASE HAZIRLAMA (Supabase)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Supabase Dashboard'a git
2. SQL Editor'Ã¼ aÃ§
3. Åu field'larÄ± Users tablosuna ekle (eÄŸer yoksa):

   ALTER TABLE "Users" ADD COLUMN IF NOT EXISTS "is_approved" BOOLEAN DEFAULT false;
   ALTER TABLE "Users" ADD COLUMN IF NOT EXISTS "created_at" TIMESTAMPTZ DEFAULT NOW();


4. Test kullanÄ±cÄ±sÄ± ekle:

   -- Ã–nce PHP ile hash oluÅŸtur:
   php /var/www/stokve/generate_test_hash.php

   -- Ã‡Ä±kan INSERT query'lerini Supabase'e yapÄ±ÅŸtÄ±r


ğŸ§ª TEST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Login test:
   - http://raspberry-ip/
   - Email: yonetici@test.com
   - Password: 123456


2. YÃ¶netici Ã¶zellikleri test et:
   - KullanÄ±cÄ± onaylama
   - Stok ekleme
   - GeÃ§miÅŸ filtreleme


3. Personel test:
   - Ã–nce YÃ¶netici ile gir
   - KullanÄ±cÄ± yÃ¶netiminden Personel'i onayla
   - Logout â†’ Personel ile gir


ğŸ”’ GÃœVENLÄ°K
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… YapÄ±lmÄ±ÅŸ:
  - CSRF token protection
  - XSS protection
  - SQL injection prevention
  - Session hijacking detection
  - Rate limiting
  - Password hashing (bcrypt)


â— YapÄ±lmasÄ± gerekenler (production iÃ§in):

1. HTTPS aktif et:
   sudo apt install certbot python3-certbot-nginx
   sudo certbot --nginx -d your-domain.com


2. Firewall ayarla:
   sudo ufw allow 22
   sudo ufw allow 80
   sudo ufw allow 443
   sudo ufw enable


3. .env dosyasÄ±nÄ± koru:
   sudo chmod 600 /var/www/stokve/.env


4. Session gÃ¼venliÄŸini artÄ±r (.env):
   SESSION_SECURE=true  # HTTPS kullanÄ±yorsan


ğŸ“ DOSYA YAPISI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/var/www/stokve/
â”œâ”€â”€ public/              # Web root (Nginx buraya point eder)
â”‚   â”œâ”€â”€ index.php        # Login sayfasÄ±
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ common.js    # Shared JavaScript
â”‚   â”œâ”€â”€ personel/        # Personel paneli (4 sayfa)
â”‚   â””â”€â”€ yonetici/        # YÃ¶netici paneli (5 sayfa)
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/          # KonfigÃ¼rasyon dosyalarÄ±
â”‚   â”‚   â”œâ”€â”€ database.php # Database baÄŸlantÄ±
â”‚   â”‚   â”œâ”€â”€ config.php   # Uygulama ayarlarÄ±
â”‚   â”‚   â””â”€â”€ env.php      # Environment loader
â”‚   â”œâ”€â”€ auth/            # Authentication
â”‚   â”œâ”€â”€ api/             # REST API endpoints (6 adet)
â”‚   â””â”€â”€ utils/           # Helper fonksiyonlar
â”‚
â”œâ”€â”€ .env                 # Environment variables (GÄ°ZLÄ°!)
â”œâ”€â”€ nginx.conf           # Nginx config
â””â”€â”€ install.sh           # Kurulum scripti


ğŸ“ SORUN GÄ°DERME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ 502 Bad Gateway:
   - PHP-FPM Ã§alÄ±ÅŸÄ±yor mu kontrol et:
     sudo systemctl status php8.2-fpm
   - Socket path doÄŸru mu:
     ls -la /var/run/php/


âŒ 403 Forbidden:
   - Dosya izinlerini kontrol et:
     sudo chown -R www-data:www-data /var/www/stokve
     sudo chmod -R 755 /var/www/stokve


âŒ Database baÄŸlantÄ± hatasÄ±:
   - .env dosyasÄ±nÄ± kontrol et
   - Supabase credentials doÄŸru mu?
   - Internet baÄŸlantÄ±sÄ± var mÄ±?


âŒ Login olmuyor:
   - Test kullanÄ±cÄ±sÄ± oluÅŸturuldu mu?
   - is_approved = true mi?
   - Password hash doÄŸru mu?


ğŸ“Š LOG DOSYALARI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Nginx:
  /var/log/nginx/stokve-access.log
  /var/log/nginx/stokve-error.log

PHP-FPM:
  /var/log/php8.2-fpm.log

Sistem:
  /var/log/syslog


ğŸ¯ Ã–NEMLÄ° NOTLAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. .env dosyasÄ±nÄ± ASLA commit etmeyin!
2. Production'da SESSION_SECURE=true yapÄ±n (HTTPS ile)
3. DÃ¼zenli backup alÄ±n (database + dosyalar)
4. Log dosyalarÄ±nÄ± kontrol edin
5. PHP ve Nginx gÃ¼ncel tutun


ğŸ“ˆ PERFORMANS Ã–NERÄ°LERÄ°
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. PHP-FPM worker sayÄ±sÄ±nÄ± artÄ±r (yoÄŸun kullanÄ±m iÃ§in):
   sudo nano /etc/php/8.2/fpm/pool.d/www.conf
   pm.max_children = 10
   pm.start_servers = 4


2. Nginx caching aktif et (static dosyalar iÃ§in)


3. Database connection pooling (zaten var)


ğŸ“§ DESTEK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Sistem Claude tarafÄ±ndan geliÅŸtirilmiÅŸtir.
Sorun bildirimi iÃ§in log dosyalarÄ±nÄ± kontrol edin.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Version: 1.0.0
Last Updated: 2025
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
